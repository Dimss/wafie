version: v2beta1
name: devspace
dev:
  app:
    workingDir: /go/src/github.com/Dimss/wafie
    labelSelector:
      app: "appsecgw"
    container: gateway
    devImage: dimssss/wafie-appsecgw-dev:latest
    sync:
      - path: ./:./
        waitInitialSync: true
        printLogs: true
        polling: true
        disableDownload: true
      - path: ./devspace_start.sh
        printLogs: true
        waitInitialSync: true
        polling: true
    patches:
      - op: remove
        path: spec.containers.name=gateway.readinessProbe
      - op: remove
        path: spec.containers.name=gateway.livenessProbe
      - op: add
        path: spec.securityContext
        value:
          runAsUser: 0
          runAsGroup: 0
    terminal:
      command: ./devspace_start.sh
    ssh:
      enabled: true
    ports:
      - port: "2345"
      - port: "10000"
      - port: "19000"


