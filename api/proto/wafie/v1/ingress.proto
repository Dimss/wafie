syntax = "proto3";

package wafie.v1;

enum UpstreamRouteType {
  UPSTREAM_ROUTE_TYPE_UNSPECIFIED = 0;
  UPSTREAM_ROUTE_TYPE_DOMAIN = 1;
  UPSTREAM_ROUTE_TYPE_PORT = 2;
}

enum DiscoveryStatusType {
  DISCOVERY_STATUS_TYPE_UNSPECIFIED = 0;
  DISCOVERY_STATUS_TYPE_SUCCESS = 1;
  DISCOVERY_STATUS_TYPE_INCOMPLETE = 2;
  DISCOVERY_STATUS_TYPE_DISABLED = 3;
}

enum IngressType {
  INGRESS_TYPE_UNSPECIFIED = 0;
  INGRESS_TYPE_NGINX = 1;
  INGRESS_TYPE_ISTIO = 2;
  INGRESS_TYPE_OCP = 4;
}

message Ingress {
  string name = 1;
  string namespace = 2;
  string host = 3;
  int32 port = 4;
  string path = 5;
  string upstream_host = 6;
  int32 upstream_port = 7;
  int32 container_port = 8;
  int32 application_id = 9;
  string raw_ingress_spec = 10;
  IngressType ingress_type = 11;
  DiscoveryStatusType discovery_status = 12;
  string discovery_message = 13;
  UpstreamRouteType upstream_route_type = 14;
  int32 proxy_listener_port = 15;
}

message CreateIngressRequest {
  Ingress ingress = 1;
}

message CreateIngressResponse {}


service IngressService{

  rpc CreateIngress(CreateIngressRequest) returns (CreateIngressResponse);

}